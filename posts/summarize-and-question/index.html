<!DOCTYPE html>
<HTML><HEAD>

  <!-- Set base for this page equal to domain root -->
  <base href="../../">

  <!-- Page-specific metadata -->
  <title>Using AI to Distill and Question Texts | Summarize and question the contents of a webpage from within the browser</title>
  <meta property="og:type" content="website"/>
  <meta property="og:publish_date" content="2024-01-18T00:00:00-0500"/>
	<meta property="og:title" content='Using AI to Distill and Question Texts | Summarize and question the contents of a webpage from within the browser'/>
	<meta property="og:description" content="My name is David Colarusso.â€  I founded and co-direct Suffolk University Law School's Legal Innovation & Technology (LIT) Lab. By training I'm an attorney & science educator. By experience, I'm a data scientist, craftsman, and writer."/>
	<meta property="og:image" content="images/50-days/text_distillery.png"/>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ST9X6H808L"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-ST9X6H808L');
  </script>

  <!-- Metadata for mobile -->
	<meta http-equiv="Content-type" content="text/html;charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <meta name="apple-mobile-web-app-capable" content="no" />
  <link rel="apple-touch-icon" href="images/comic.png"/>

  <!-- JS & style -->
	<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
	<link rel="stylesheet" type="text/css" href="css/style.css">
  <script src="js/functions.js"></script>
  <script src="js/spin.js"></script>

  <link rel="stylesheet" href="css/prism.css" data-noprefix="">
  <script type="text/javascript" src="js/prism.js"></script>

  <!--<link rel="stylesheet" type="text/css" href="css/green-audio-player.css">
  <script src="js/green-audio-player.js"></script>-->
  
  <!-- RSS -->
  <!--<link rel="alternate" type="application/rss+xml" title="Sadly Not, Havoc Dinosaur" href="https://sadlynothavocdinosaur.com/feed/" />-->

</HEAD>
<BODY BGCOLOR="#ffffff" BACKGROUND="" MARGINWIDTH="0" MARGINHEIGHT="0">

<!-- Title and search -->
<div class="title_bar">
  <div class="home">
    <a href="./" tabindex="1"><img src="images/home.png" class="home_btn"></a>
  </div>  
  <div class="search">
    <a href="javascript:show_search();" tabindex="3"><img src="images/search.png" class="search_btn"></a>
    <input id="query" type="text" tabindex="2"/>
  </div>
  <span id="title"><a href="./" class="title_home">Sadly Not, Havoc Dinosaur</a></span>
</div>

<div class="content">
  <!-- START PAGE CONTENT -->
  <div id="page">
  <!-- 
    =================================================
    
                      INTRODUCTION

    =================================================
  -->
  <h1 class="post_title_01">Using AI to Distill and Question Texts</i></h1>
  <div class="post_title_02">Summarize and question the contents of a webpage from within the browser</div>
  <div class="featured_img_right">
    <!--<div class="audio_container_container" style="display:show;">
      <div class="audio_container">
        <b>Hear the author read <i>Title Goes Here</i></b>
        <div class="gap-example player-accessible">
          <audio>
              <source src="mp3s/title.mp3" type="audio/mpeg">
          </audio>
        </div>
        <span class="playback">
          Speed: <a href="javascript:void('')" onClick="set_speed(0.5)" class="playback" id="pb05">0.5x</a> &bull;
                  <a href="javascript:void('')" onClick="set_speed(1)" class="playback" id="pb10" style="font-weight:900;">1x</a> &bull;
                  <a href="javascript:void('')" onClick="set_speed(1.5)" class="playback" id="pb15">1.5x</a> &bull;
                  <a href="javascript:void('')" onClick="set_speed(2)" class="playback" id="pb20">2x</a> &bull;
                  <a href="javascript:void('')" onClick="set_speed(3)" class="playback" id="pb30">3x</a>
        </span>
      </div>
    </div>-->
    <a href="images/50-days/text_distillery.png"><img src="images/50-days/text_distillery.png" ALT="Image of a 'robot' actor, a robot holding a Greek drama mask." class="list_img_file"/></a>
    <div class="caption">
      Text Distllery, latent space "photography" by <a href="https://mastodon.social/@Colarusso" target="_blank" class="captionlnk">Colarusso</a>
    </div>
  </div>
  <p class="post_p">
    <a href="https://mastodon.social/@Colarusso" target="_blank" class="body_links"><img src="images/colarusso.jpg" class="headshot_small" alt="Headshot of the author, Colarusso." style="margin-top: 7px;"/></a>
    David Colaursso<br><span class="post_date">Co-director, Suffolk's <a href="https://suffolklitlab.org/" target="_blank" class="captionlnk">Legal Innovation &amp; Tech Lab</a></span>
  </p>
  <p><i>This post is <b>the first</b> of a fifty in my serise <a href="posts/50-days-of-lit-prompts">50 Days of LIT Prompts</i></a>.</p>
	<p>
    I've started seeing variations on the following, "Sure, I played with ChatGPT when it came out, but I don't really get what the big deal is. You can't trust what it tells you, and it's a pretty mediocor writer." These are valid chritisisums, but if you stop there, it's clear you've only experienced a narrow set of what these tools can do. When I speak of "these tools" I"m refering to a class of tools properly known as <a href="https://en.wikipedia.org/wiki/Large_language_model" target="_blank">Large Language Models</a> (LLMs). Most folks' first encounter with such tools was in the guise of a chat bot, but they are NOT general purpose thinking machines. LLMs are sentence completion engines. Their replies aren't based on any knowledge of the world other than that contained in the structure of the text upon which they were trained. In a very real way, they are "spicy autocomplete." Like machine learning (the pervious genration of tech to wear the AI monkier) they are <a href="https://www.predictionmachines.ai/" target="_blank">prediction machines</a>. Give them a prompt and they predict the most likely set of words. Prompts are what we call the text upon which they build. Feed an LLM a prompt, and it will return a plausible-sounding follow-up. "Four score and seven..." might return "years ago our fathers brought forth..." because the Getisburg Address was in the training data and outside of quoting it, when else do people write like that? It's just a prediction.  
  </p>
  <div class="featured_img">
    <a href="images/50-days/gpt_mbe.png"><img src="images/50-days/gpt_mbe.png" ALT="Image of a 'robot' actor, a robot holding a Greek drama mask." class="list_img_file"/></a>
    <div class="caption">
      Figure 1 from <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4389233" target="_blank" class="captionlnk">GPT-4 Passes the Bar Exam</a> showing the performance ove various LLMs on the multi-state bar exam. <a href="images/50-days/gpt_mbe.png" class="captionlnk">Click to enlarge</a>.
    </div>
  </div>
  <p>
    Of course, if the traing data of an LLM is large enough, it can make a lot of different predictions, like "...given the above multiple choice question, the answer is...." For some folks saying that LLMs are just sentence completion machines undersells what they can do. To this I say, "you're undeselling the power of sentence completion machines." These tools are sentence competion machines, understanding that is important if we want to weild them well, or conversly, understand the dangers they present.
  </p>
  <p>
    A lot of folks want to feed in 5 words and get out 500 (e.g., write me an essay discusing the lessons of the French Revloution). These are the uses referenced by those dismissing LLMs as BS artists and medeocar writers. The followup text is poorly constrained. So, it's not surprising that it sounds like the what you'd hear from a random guy on the street. If the tool is providing the most likely set of next words that will tend twoards what some have called "mansplaining as a service." I fear most folks have been looking through the wrong end of the telescope. Though there are times when it can be fun to look through the wrong end of the telescope, most of the time we need to turn it around. Instead of writing prompts with 5 words and expecting 500, we need to be provideing 500 and asking for 5. 
  </p>
  <p>
    So for this, the first of 50 posts on prompt engineering, we will start with a summarization task. We'll give the LLM the text of a webpage and ask it to summarize it. Then we'll leave the "conversation" open so that we can ask questions of the text (e.g., you mentioned X in the summary, tell me more about that). After you have your workflow up and running, we'll kick the tires, introducing the concept of <a href="https://simonwillison.net/2023/Nov/27/prompt-injection-explained/" target="_blank">prompt injection</a> and developing a sense for how much we can trust the answers we're getting. In subsequent posts in this serise we'll also explore some of the <a href="https://dl.acm.org/doi/10.1145/3442188.3445922" target="_blank">critical literature</a> around LLMs in general. ðŸ¦œ But before we do all of that, <b>let's build somehting!</b>
  </p>
  <p>
    We'll do our building in the LIT Prompts extention. <b>If you aren't familar with the extension, don't worry.</b> We'll walk you through setting things up before we start building. If you have used the LIT Prompts extension before, you can skip to step 3: <a href="posts/summarize-and-question/#3">Write your Template</a>.
  </p>
  <h3>On This Page</h3>
  <ol>
    <li><a href="posts/summarize-and-question/#" start="0">Motivation &amp; Framing</a> (what you just read above)</li>
    <li><a href="posts/summarize-and-question/#2" onClick="expand_setup();">Setup LIT Prompts</a></li>
    <ol type="a">
      <li><a href="posts/summarize-and-question/#2a" onClick="expand_setup();">Install the extension</a></li>
      <li><a href="posts/summarize-and-question/#2b" onClick="expand_setup();">Point it at an API</a></li>
    </ol>
    <li><a href="posts/summarize-and-question/#3">Write Your Template</a></li>
    <li><a href="posts/summarize-and-question/#references">References</a></li>
  </ol>
  <!-- 
    =================================================
    
                   Setup LIT Prompts

    =================================================
  --> 
  <hr>
  <h2><a name="2" href="posts/summarize-and-question/#2" onClick="expand_setup();" class="anchor" alt="deep link to this section"></a>2. Setup LIT Prompts </h2>
  <div id="expand_setup" style="text-align: left;display:none;font-size: small;">
    <a href="javascript:expand_setup();" style="text-decoration: none;">&#9658; Expand</a>
  </div>
  <div id="collapse_setup" style="text-align: left;font-size: small;">
    <a href="javascript:collapse_setup();" style="text-decoration: none;">&#9660; Collapse</a>
  </div>
  <div id="setup_extension">
    <div class="list_vid">
      <iframe class="embed_vid" src="https://www.youtube-nocookie.com/embed/Ql8aXGvLBGU" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>
      <div class="caption">
        7 min intro video
      </div>
    </div>
    <p>
      <i><b>LIT Prompts</b></i> is a browser extension designed by Suffolk University Law School's <a href="https://suffolklitlab.org/" target="_blank">Legal Innovation and Technology Lab</a> to help folks explore the use of <a href="https://en.wikipedia.org/wiki/Large_language_model" target="_blank">Large Language Models</a> (LLMs) and <a href="https://en.wikipedia.org/wiki/Prompt_engineering" target="_blank">prompt engineering</a>. LLMs are sentence completion machines, and prompts are the text upon which they build. Feed an LLM a prompt, and it will return a plausible-sounding follow-up (e.g., "Four score and seven..." might return "years ago our fathers brought forth..."). LIT Prompts lets users create and save prompt templates based on data from an active browser window (e.g., selected text or the whole text of a webpage) along with text from a user. Below we'll walk through a specific example. 
    </p>
    <p>
      To get started, follow <b>the first four minutes</b> of the intro video or the steps outlined below. <i>Note: The video only shows Firefox, but once you've installed the extension, the steps are the same.</i>
    </p>
    <h3><a name="2a" href="posts/summarize-and-question/#2a" class="anchor" alt="deep link to this section"></a>2(a). Install the extension</h3>
    <p>Follow the links for your browser.</p>
    <ul>
      <li>
        <b>Firefox:</b> (1) visit the extension's <a href="https://addons.mozilla.org/en-US/firefox/addon/lit-prompts/" target="_blank">add-ons page</a>; (2) click "Add to Firefox;" and (3) grant permissions.
      </li>
      <li>
        <b>Chrome:</b>  (1) visit the extension's <a href="https://chromewebstore.google.com/detail/lit-prompts/hfeojjmldhebkeknfapoghcohkhffcmp" target="_blank">web store page</a>; (2) click "Add to Chrome;" and (3) review permissions / "Add extension."
      </li>
    </ul>
    <p>
      If you don't have Firefox, you can <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">download it here</a>. Would you rather use Chrome?  You can <a href="https://www.google.com/chrome/" target="_blank">download it here</a>.
    </p>
    <h3><a name="2b" href="posts/summarize-and-question/#2b" class="anchor" alt="deep link to this section"></a>2(b). Point it at an API</h3>
    <p>
      Here we'll walk through how to use an LLM provided by OpenAI, but you don't have to use their offering. If you're interested in alternatives, you can find them <a href="https://github.com/SuffolkLITLab/prompts/tree/main#openai-compatible-api-integration" target="_blank">here</a>. You can even run your LLM locally, avoiding the need to share your prompts with a third-party. If you need an OpenAI account, you can <a href="https://platform.openai.com/signup" target="_blank">create one here</a>. Note: when you create a new OpenAI account you are given a limited amount of free API credit. If you created an account some time ago, however, these may have expired. If your credits have expired, you will need to enter a <a href="https://platform.openai.com/account/billing/overview" target="_blank">billing method</a> before you can use the API. You can check the state of any credits <a href="https://platform.openai.com/usage" target="_blank">here</a>. 
    </p>
    <p>
      Login to <a href="https://openai.com/" target="_blank">OpenAI</a>, and navigate to the <a href="https://platform.openai.com/docs/" target="_blank">API documentation</a>. 
    </p>
    <div class="featured_img_center">
      <a href="images/50-days/OpenAI_keys.png"><img src="images/50-days/OpenAI_keys.png" ALT="Screenshot of the OpenAI API Keys page showing where to click to create a new key." class="list_img_file" style="border: 1px solid #a5a5a5;"/></a>
    </div>
    <p>Once you are looking at the API docs. follow the steps outlined in the image above. That is:
    <ol>
      <li>Select "API keys" from the left menu</li>
      <li>Click "+ Create new secret key"</li>
    </ol>
    <hr>
    <p>
      On LIT Prompt's <i>Templates & Settings</i> screen, set your API Base to <code>https://api.openai.com/v1/chat/completions</code> and your API Key equal to the value you got above after clicking "+ Create new secret key".  You get there by clicking the <i>Templates & Settings</i> button in the extension's popup:
    </p>
    <ol>
      <li>open the extenison</li>
      <li>click on  <i>Templates & Settings</i></li>
      <li>enter the API Base and Key (look for the section <i>OpenAI-Compatible API Integration</i>)</li>
    </ol>
    <div class="featured_img_center">
      <a href="images/50-days/popup.png"><img src="images/50-days/popup.png" ALT="Screenshot of the LIT Prompts extension popup." class="list_img_file" style="border: 1px solid #a5a5a5;"/></a>
    </div>
    <p>
      Once those two bits of information (the API Base and Key) are in place, you're good to go. Now you can edit, create, and run prompt templates. Just open the LIT Prompts extension, and click away. I suggest, however, that you read through the <i>Templates and Settings</i> screen to get oriented. 
    </p>
    <div class="featured_img_center">
      <a href="images/50-days/credentials.png"><img src="images/50-days/credentials.png" ALT="Screenshot of the LIT Prompts extension popup." class="list_img_file" style="border: 1px solid #a5a5a5;"/></a>
    </div>
    <p>
      <span style="background:yellow;">If you recive an error after entering your Base and Key, and you are using OpenAI, make sure to check the state of any credits <a href="https://platform.openai.com/usage" target="_blank">here</a>. If you don't have any credits, you will need a billing method on file.</span>
    </p>
    <p>
      <i>If you found this hard to follow, consider following along with the first four minutes of the video <a href="posts/summarize-and-question/#1">above</a>. It covers the same content. It focuses on Firefox, but once you've installed the extension, the steps are the same.</i>
    </p>
  </div>
 
  <!-- 
    =================================================
    
                   Write Your Template

    =================================================
  --> 
  <hr>
  <h2><a name="3" href="posts/summarize-and-question/#3" class="anchor" alt="deep link to this section"></a>3. Write Your Template</h2>

  <div class="list_img">
    <a href="images/boxquote.png"><img src="images/boxquote.png" ALT="A slide showing the Georeg Box quote: All models are wrong, but some models are useful." class="list_img_file"/></a>
    <div class="caption">
      Maps are models; they don't show everything. That's okay as long as you don't confuse the map for the territory.
    </div>
  </div>

  <p>
    When crafting a LIT Prompts template, we use a mix of plain language and variable placeholders. Specifically, you can use double curly brackets to encase predefined variables and prompts for your user. If the text between the brackets matches one of our predefined variables, that section of text will be replaced with its content. Today we'll meet our first predefined variable, <code>{{innerText}}</code>. docs
  </p>
  <p>
    The <code>{{innerText}}</code> variable will be replaced by the innerText of your current page (roughly speaking the hard-coded text of a page). In the template below, you'll see <code>{{innerText}}</code> on line 1 followed by a line break, three dashes (<code>---</code>), and an instruction on line 5. 
  </p>
  <!-- 
    #########################
    #########################
    #####   start code   ####
    #########################
    #########################
  -->
  <section class="line-numbers">
    <pre class="language-xxx" style="white-space:pre-wrap;"><code>{{innerText}} 

---

Provide a short 150 word summary of the above text. If asked any follow-up questions, use the above text, and ONLY the above text, to answer them. If you can't find an answer in the above text, politely decline to answer explaining that you can't find the information. You can, however, finish a thought you started above if asked to continue, but don't write anything that isn't supported by the above text. And keep all of your replies short! 

</code></pre>
  </section>
  <!-- 
    #########################
    #########################
    #####    end code    ####
    #########################
    #########################
  -->
  <p>And here are the template's parameters:</p>
  <ul>
      <li>Output Type: <code>LLM</code></li>
      <li>Model: <code>gpt-3.5-turbo</code></li>  
      <li>Temperature: <code>0.7</code></li>  
      <li>Max Tokens: <code>250</code></li>  
      <li>JSON: <code>No</code></li>  
      <li>Output To: <code>Screen Only</code></li>  
      <li>Post-run Behavior: <code>Chat</code></li>  
      <li>Hide Button: <code>unchecked</code></li>
  </ul>
  
  <h3><a name="working" href="posts/summarize-and-question/#working" class="anchor" alt="deep link to this section"></a>Working with the above template</h3>
  <p>
    To work with the above template, you could copy it and its parameters into LIT Prompts one by one, or you could download a single prompts file and upload it from the extension's <i>Templates &amp; Settings</i> screen. 
  </p>

  <div class="featured_img_center" style="max-width:900px;">
    <a href="images/50-days/template_upload.png"><img src="images/50-days/template_upload.png" ALT="Screenshot of the LIT Prompts Templates and Settings page showing where to upload prompts files." class="list_img_file" style="border: 1px solid #a5a5a5;"/></a>
  </div>

  <p>
    This will replace your existing prompts. That being said, you can download a prompts file (the prompt and its parameters) suitable for upload by clicking this button. 
  </p>

  <div class="button_row" style="margin-bottom: 10px;">
    <a href="javascript:void('');" onClick="saveTextAsFile(prompts,'prompt_template.txt')" class="button" style="width:220px;">Download prompts file</a>
  </div>

  <h3><a name="tires" href="posts/summarize-and-question/#tires" class="anchor" alt="deep link to this section"></a>Let's Kick the Tires</h3> 
  <p>
    Provide your "actor" with a rough script of how the conversation should unfold (e.g., add a new section explaining that first they should start with some goal and later shift to another after some change in the conversation). Crafting a prompt that will produce fidelity to such a plan can be hard. You'll likely want to use more advanced models and provide a lot of context. On that front, the current model can read around 16,000 tokens (maybe 8,000 words). If you need more than that consider changing the model to something with a larger context window. See e.g., <a href="https://platform.openai.com/docs/models" target="_blank">OpenAI model list</a>.</p>
  <p>
    As noted above, eventually, you'll hit a limit on what you can simulate, but we we'll return to simulations with more functionaly in future posts.
  </p>

  <h2><a name="references" href="posts/summarize-and-question/#references" class="anchor" alt="deep link to this section"></a>3. TL;DR References</h2>
  <p>
    ICYMI, here are blubs for a selection of works linked above.
  </p>
  <ul>
    <li><a href="https://www.predictionmachines.ai/">text</a></li>
    <li><a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4389233">text</a></li>
    <li><a href="https://simonwillison.net/2023/Nov/27/prompt-injection-explained/">text</a></li>
    <li>Emily M. Bender, Timnit Gebru, Angelina McMillan-Major, and Shmargaret Shmitchell. 2021. <i>On the Dangers of Stochastic Parrots: Can Language Models Be Too Big? ðŸ¦œ</i>. In Proceedings of the 2021 ACM Conference on Fairness, Accountability, and Transparency (FAccT '21). Association for Computing Machinery, New York, NY, USA, 610â€“623. <a href="https://dl.acm.org/doi/10.1145/3442188.3445922">https://doi.org/10.1145/3442188.3445922</a></li>
    <!--<li><a href="">text</a></li>-->
  </ul>

  <!-- Preview projects -->
  <div id="previews"></div>
  <script>load_previews()</script>
  
  </div>
  <!-- END PAGE CONTENT -->
  <div class="footer">
      <span class="footer_links">
        <a href="https://mastodon.social/@Colarusso" target="_blank">Mastodon</a>
        | <a href="https://github.com/colarusso" target="_blank">GitHub</a>
        | <a href="./privacy">Privacy</a> 
        <!--| <a href="https://sadlynothavocdinosaur.com/feed/">RSS</a>-->
      </span>
      <span class="byline">Site by David Colarusso</span>
  </div>
</div>

<script>
  if (!window.location.hash) { 
    collapse_setup();
  }

  /*new GreenAudioPlayer('.gap-example');
  const audio_object = document.querySelector('.gap-example  audio');*/
  
  (async () => {
    prompts = await loadFile('posts/summarize-and-question/prompt_template.txt');
    exported = await loadFile('posts/summarize-and-question/interactions.html');
  })()
</script>

<!--
Publication checklist:

- Metadata title, description, and image: X
- Updated anchor links e.g., "posts/summarize-and-question/": X
- Updated prompt_template.txt file in folder: X
- Metadata publication date: ? 
-->

</BODY></HTML>


<!DOCTYPE html>
<HTML><HEAD>

  <!-- Set base for this page equal to domain root -->
  <base href="../../">

  <!-- Page-specific metadata -->
  <title>Narrative Quanta: LLMs as RPG Building Blocks: Generate the outcome of a scene for a role-playing game</title>
  <meta property="og:type" content="website"/>
  <meta property="og:publish_date" content="2024-02-19T00:00:00-0500"/>
  <meta property="og:title" content="Narrative Quanta: LLMs as RPG Building Blocks: Generate the outcome of a scene for a role-playing game"/>
  <meta property="og:description" content=" Over the course of this series I've come to embrace training simulations as a promising use case for large language models (LLMs). Such use recasts many of an LLM's traditional weaknesses as strengths. A tendency to make things up is after all an asset when performing improv. When I introduced simple simulations, I promised we'd eventually get to more advanced ones. See What if Members of Talking Professions Could Log Time in Simulators Like Pilots? To date, we've simulated the first meeting between a public defender and their client as well as a law professor engaging a student in Socratic dialogue. These simulations were a bit shallow, however. For one thing, they presented an unending unchanging dialogue. One reader after starting the simulated client meeting observed, &quot;I can't figure out how to make it end.&quot; My suggestion was that they say goodbye to their client and &quot;exit,&quot; by which I meant, &quot;stop typing.&quot;  "/>
  <meta property="og:image" content="images/50-days/dragons_and_desk_jobs_square.png"/>
  <meta property="og:image:width" content="1024" />
  <meta property="og:image:height" content="1024" />

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ST9X6H808L"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-ST9X6H808L');
  </script>

  <!-- Metadata for mobile -->
  <meta http-equiv="Content-type" content="text/html;charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <meta name="apple-mobile-web-app-capable" content="no" />
  <link rel="apple-touch-icon" href="images/comic.png"/>

  <!-- JS & style -->
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" type="text/css" href="css/style.css?v=2024-01-30">
  <script src="js/functions.js?v=2024-01-30"></script>
  <script src="js/spin.js"></script>

  <link rel="stylesheet" href="css/prism.css" data-noprefix="">
  <script type="text/javascript" src="js/prism.js"></script>

  <!--<script id="MathJax-script" async src="js/mathjax/tex-mml-chtml.js"></script>

  <link rel="stylesheet" type="text/css" href="css/green-audio-player.css">
  <script src="js/green-audio-player.js"></script>-->

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="Sadly Not, Havoc Dinosaur" href="https://sadlynothavocdinosaur.com/feed.xml" />

</HEAD>
<BODY BGCOLOR="#ffffff" BACKGROUND="" MARGINWIDTH="0" MARGINHEIGHT="0">

<!-- Message Banner -->
<div id="msg_bar" style="display:none;"></div>

<!-- Title and search -->
<div class="title_bar">
  <div class="home">
    <a href="./" tabindex="1"><img src="images/home.png" class="home_btn"></a>
  </div>
  <div class="search">
    <a href="javascript:show_search();" tabindex="3"><img src="images/search.png" class="search_btn"></a>
    <input id="query" type="text" tabindex="2"/>
  </div>
  <span id="title"><a href="./" class="title_home">Sadly Not, Havoc Dinosaur</a></span>
</div>

<div class="content">
  <!-- START PAGE CONTENT -->

  <div id="page">
  <!--
    =================================================

                      INTRODUCTION

    =================================================
  -->
  <h1 class="post_title_01">Narrative Quanta: LLMs as RPG Building Blocks</h1>
  <div class="post_title_02">Generate the outcome of a scene for a role-playing game</div>
  <div class="featured_img_right">
    <!--<div class="audio_container_container" style="display:show;">
      <div class="audio_container">
        <b>Hear the author read <i>TK</i></b>
        <div class="gap-example player-accessible">
          <audio>
              <source src="mp3s/title.mp3" type="audio/mpeg">
          </audio>
        </div>
        <span class="playback">
          Speed: <a href="javascript:void('')" onClick="set_speed(0.5)" class="playback" id="pb05">0.5x</a> &bull;
                  <a href="javascript:void('')" onClick="set_speed(1)" class="playback" id="pb10" style="font-weight:900;">1x</a> &bull;
                  <a href="javascript:void('')" onClick="set_speed(1.5)" class="playback" id="pb15">1.5x</a> &bull;
                  <a href="javascript:void('')" onClick="set_speed(2)" class="playback" id="pb20">2x</a> &bull;
                  <a href="javascript:void('')" onClick="set_speed(3)" class="playback" id="pb30">3x</a>
        </span>
      </div>
    </div>-->
    <a href="images/50-days/dragons_and_desk_jobs.png"><img src="images/50-days/dragons_and_desk_jobs.png" ALT="A dragon seated at a desk wearing a suit under the title 'Dragons and Desk Jobs'" class="list_img_file"/></a>
    <div class="caption">
      Dragons &amp Desk Jobs, latent space "photography" by <a href="https://mastodon.social/@Colarusso" target="_blank" class="captionlnk">Colarusso</a>
    </div>
  </div>
  <p class="post_p">
    <a href="https://mastodon.social/@Colarusso" target="_blank" class="body_links"><img src="images/colarusso.jpg" class="headshot_small" alt="Headshot of the author, Colarusso." style="margin-top: 7px;"/></a>
    David Colaursso<br><span class="post_date">Co-director, Suffolk's <a href="https://suffolklitlab.org/" target="_blank" class="captionlnk">Legal Innovation &amp; Tech Lab</a></span>
  </p>
  <p><i>This is <b>the 21st</b> post in my series <a href="posts/50-days-of-lit-prompts">50 Days of LIT Prompts</i></a>.</p>
  <p>
    If you want to jump right to playing a beat of <i>Dragons &amp; Desk Jobs</i>, <a href="ai/rpg-quanta/">be my guest</a>. I prepaid for some "AI" time. So, play while the getting is good. Otherwise, let's take a moment to talk about how we got here and where we're going. After that, I'll show you how to create your own such scene.
  </p>
  <p>
    Over the course of this series I've come to embrace training simulations as a promising use case for <a href="https://en.wikipedia.org/wiki/Large_language_model" target="_blank">large language models</a> (LLMs). Such use recasts many of an LLM's traditional weaknesses as strengths. A tendency to <a href="https://en.wikipedia.org/wiki/Hallucination_(artificial_intelligence)" target="_blank">make things up</a> is after all an asset when performing improv. When I introduced simple simulations, I promised we'd eventually get to more advanced ones. See <a href="posts/simple-training-sims">What if Members of Talking Professions Could Log Time in Simulators Like Pilots?</a> To date, we've simulated the <a href="ai/client-meeting-sim/">first meeting</a> between a public defender and their client as well as a law professor engaging a student in <a href="ai/paper-chase-2.0/">Socratic dialogue</a>. These simulations were a bit shallow, however. For one thing, they presented an unending unchanging dialogue. One reader after starting the simulated client meeting observed, "I can't figure out how to make it end." My suggestion was that they say goodbye to their client and "exit," by which I meant, "stop typing."
  </p>
  <p>  
    If we are to tackle more advanced simulations, we'll need a way to "change things up." There's only so much LLMs can do with a clever framing. Ideally, we could work with some atomic unit of storytelling, perhaps a narrative if-then statement of sorts. Something which could direct our narrative based on events as they unfold. For example, if this or that happens, our "AI actor" could be directed to change their motivations accordingly. When we <a href="posts/simple-training-sims">first met</a> an LLM simulation, I suggested readers provide their LLMs a script to follow. Our <a href="posts/socrates-lives">law prof's prompt</a> actually included something that looked like this, laying out a changing set of goals meant to shape a conversation. However, these were rather linear progressions, and if you tried your own variation, you likely realized how fragile the output behavior can be. Sometimes it works. Sometimes it doesn't. A robust simulation calls for more robust control. 
  </p>
  <p>
    For inspiration I've turned to the world of role-playing games. At their core, games like <i>Dungeons & Dragons</i> are collaborative storytelling games. The rules help anchor the story and provide verisimilitude, largely by tying the outcome of events to random chance. Interestingly, instead of making anything possible, this injection of randomness often works to constrain possible outcomes. Let's explore an example. 
   </p>
   <p> 
    You are playing a game called <i>Dragons and Desk Jobs</i>. Your character is a non-magical human living in a magical world. They work in an office uptown where their boss is a dragon. You make choices for your character, deciding what actions they should take, but you do not control what happens to your character. Control lies with the game master. The game master acts out all the non-player characters (NPCs) while also serving as an all-powerful narrator. You can choose to get up from your desk to get a cup of coffee, but the game master decides if you can make it across the office. 
  </p>
  <p>
    Simple actions are made without comment. However, when there is a question as to whether you can successfully complete a task, you may be asked to role a many-sided dice (20-sided dice are a favorite). First, the game master will assess the difficulty of the task on a scale of "very easy" to "nearly impossible."" The difficulty for the task at hand may be written down somewhere in the rules, if not, the game master will make their own assessment. Either way, each difficulty class will correspond to a number, with the harder classes having higher numbers. To succeed, your roll (plus any relevant modifiers) must be greater than or equal to the number associated with the task's difficulty. If your character is very strong you might add a modifier (some number) to rolls for any tasks involving physical strength. We'll, however, keep it simple. There are no modifiers in <i>Dragons and Desk Jobs</i>. Players of table-top role-playing games (RPGs) will recognize this exchange as an <a href="https://colarusso.github.io/dm/more.html#abilitycheck" target="_blank">ability check</a>.
  </p>
  <p>
    In <i>Dragons and Desk Jobs</i> we'll roll a 20-sided dice to settle questions of success. Easy tasks have to meet or beat 1, medium task 7, and hard tasks 17.
  </p>
  <p>
    Let's say you want to "<code>get some coffee</code>." To see if you succeed, you would role a dice and compare it's outcome to the appropriate difficulty class. If your roll was greater than this cutoff, the game master would inform you of your success by providing some colorful narration. Here I've use <a href="https://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a> to capture this all in a compact easy-to-read format. You may remember JSON from the posts <a href="posts/diagram-sentence">Taming Texts or: How To Turn Unstructured Prose Into Structured Data</a> and <a href="posts/translate-selected">The Dream of Universal Translation</a>. The <i>difficulty</i> key has a value stating how hard the task is. <i>difficulty_cutoff</i> reminds us of the cutoff for this difficulty class. <i>Roll</i> tells us what number came up when you rolled. <i>Success</i> tells us if this was greater than or equal to the cutoff (1=success), and <i>narrative</i> gives as the blow by blow.
  </p>
  <section class="line-numbers">
    <pre class="language-javascript" style="white-space:pre-wrap;"><code>{
      "difficulty": "Easy",
      "difficulty_cutoff": 1,
      "roll": 19,
      "success": 1,
      "narrative": "As Alex finishes up some paperwork, they feel a strong craving for a cup of coffee. They push back from their desk and make their way to the office kitchen. The smell of freshly brewed coffee permeates the air, drawing them closer. With a sigh of satisfaction, they pour themselves a steaming cup, enjoying the rich aroma and the warmth it brings to their hands. Energized and ready to face the tasks ahead, Alex returns to their desk, ready to tackle the challenges of the day."
    }</code></pre>
  </section>
  <p>Now, let's imagine you have something more difficult in mind. When asked what you want to do, you respond, "<code>Jump over my desk, draw my sword and strike at the dragon seated at the front of the office.</code>"</p>
  <section class="line-numbers">
    <pre class="language-javascript" style="white-space:pre-wrap;"><code>{
    "difficulty": "Hard",
    "difficulty_cutoff": 17,
    "roll": 11,
    "success": 0,
    "narrative": "As Alex jumps over their desk and draws their sword, the dragon at the front of the office quickly reacts. It raises its enormous wing, blocking the strike with ease. The dragon lets out a deep, rumbling growl, its eyes glaring down at Alex. 'Foolish human,' it snarls. 'You dare to challenge me?' Alex's strike has been parried, and they are now faced with the wrath of the powerful dragon."
  }</code></pre>
</section>

  <p>
    As you might have guessed, the above JSON is output from today's prompt template with the LLM serving as the game master. We could have asked the LLM to simply return the narrative based on it's internal assessment of the difficulty et al., but as it turns out the results aren't as consistent. By asking the LLM to provide the difficulty, cutoff, roll, and success state before providing the narrative, we are engaging in a technique called <a href="https://en.wikipedia.org/wiki/Prompt_engineering#Chain-of-thought" target="_blank">chain-of-thought</a>. Remember, LLMs are just sentence completion machines, striving for the next most plausible words. By having it output and build upon intermediate steps we seek to constrain the ultimate output such that it is more likely to follow rules we set out in the prompt. 
  </p>
  <p>
    Also, the use of JSON plays an important role here. Not only are we setting things up so we can easily hand the output off to another template, as we did with the <a href="posts/translate-selected" target="_blank">translation templates</a>, but the use of JSON itself works to shape the nature of the output. Remember, LLMs are sentence completion machines, working to replicate the patterns seen in their training data. It's a safe bet that when JSON was part of that training data there was a good deal of attention paid to formatting and content. Consequently, the output for our <i>narrative</i> variable is more likely to be only what we asked for. Earlier LLM models had a tendency to include more than was strictly necessary. For example, if you asked it to provide a narration, it might respond with "Here's the narration..." followed by the narration. The use of JSON mitigates this behavior. FWIW, newer models don't show as much of this behavior, but as of this writing, it's still an issue.
  </p>
  <p>
    In future posts, we'll take this atomic unit of narrative and build on it even more. For now, however, feel free to have fun questing for coffee. I prepaid for some "AI" time. So,  <a href="ai/rpg-quanta/">play</a> while the getting is good. Of course, you should really build your own simulation. Imagine the possibilities. 
  </p>


  <!-- END INTRO -->

  <h3><a name="build" href="posts/socrates-lives/#build" class="anchor" alt="deep link to this section"></a>Let's build something!</h3>
  <p>
    We'll do our building in the LIT Prompts extension. If you aren't familiar with the LIT Prompts extension, don't worry. We'll walk you through setting things up before we start building. If you have used the LIT Prompts extension before, skip to <a href="posts/rpg-quanta/#template">The Prompt Pattern (Template)</a>.
  </p>
  <h3><a name="upnext" href="posts/rpg-quanta/#upnext" class="anchor" alt="deep link to this section"></a>Up Next</h3>
  <ul>
    <li><a href="posts/rpg-quanta/#setup" onClick="expand_setup();">Setup LIT Prompts</a></li>
    <ul>
      <li><a href="posts/rpg-quanta/#install" onClick="expand_setup();">Install the extension</a></li>
      <li><a href="posts/rpg-quanta/#point" onClick="expand_setup();">Point it at an API</a></li>
    </ul>
    <li><a href="posts/rpg-quanta/#template">The Prompt Pattern (Template)</a></li>
    <li><a href="posts/rpg-quanta/#tires">Kick the Tires</a></li>
    <li><a href="posts/rpg-quanta/#export">Export and Share </a></li>
    <li><a href="posts/rpg-quanta/#references">TL;DR References</a></li>
  </ul>
  <p>
    <b>Questions or comments?</b> I'm on Mastodon <a href="https://mastodon.social/@Colarusso" target="_blank">@Colarusso@mastodon.social</a>
  </p>
  <!--
    =================================================

                   Setup LIT Prompts

    =================================================
  -->
  <hr>
  <h2><a name="setup" href="posts/rpg-quanta/#setup" onClick="expand_setup();" class="anchor" alt="deep link to this section"></a>Setup LIT Prompts </h2>
  <div id="expand_setup" style="text-align: left;display:none;font-size: small;">
    <a href="javascript:expand_setup();" style="text-decoration: none;">&#9658; Expand</a>
  </div>
  <div id="collapse_setup" style="text-align: left;font-size: small;">
    <a href="javascript:collapse_setup();" style="text-decoration: none;">&#9660; Collapse</a>
  </div>
  <div id="setup_extension">
    <div class="list_vid">
      <iframe class="embed_vid" src="https://www.youtube-nocookie.com/embed/Ql8aXGvLBGU" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>
      <div class="caption">
        7 min intro video
      </div>
    </div>
    <p>
      <i><b>LIT Prompts</b></i> is a browser extension built at Suffolk University Law School's <a href="https://suffolklitlab.org/" target="_blank">Legal Innovation and Technology Lab</a> to help folks explore the use of <a href="https://en.wikipedia.org/wiki/Large_language_model" target="_blank">Large Language Models</a> (LLMs) and <a href="https://en.wikipedia.org/wiki/Prompt_engineering" target="_blank">prompt engineering</a>. LLMs are sentence completion machines, and prompts are the text upon which they build. Feed an LLM a prompt, and it will return a plausible-sounding follow-up (e.g., "Four score and seven..." might return "years ago our fathers brought forth..."). LIT Prompts lets users create and save prompt templates based on data from an active browser window (e.g., selected text or the whole text of a webpage) along with text from a user. Below we'll walk through a specific example.
    </p>
    <p>
      To get started, follow <b>the first four minutes</b> of the intro video or the steps outlined below. <i>Note: The video only shows Firefox, but once you've installed the extension, the steps are the same.</i>
    </p>
    <h3><a name="install" href="posts/rpg-quanta/#install" class="anchor" alt="deep link to this section"></a>Install the extension</h3>
    <p>Follow the links for your browser.</p>
    <ul>
      <li>
        <b>Firefox:</b> (1) visit the extension's <a href="https://addons.mozilla.org/en-US/firefox/addon/lit-prompts/" target="_blank">add-ons page</a>; (2) click "Add to Firefox;" and (3) grant permissions.
      </li>
      <li>
        <b>Chrome:</b>  (1) visit the extension's <a href="https://chromewebstore.google.com/detail/lit-prompts/hfeojjmldhebkeknfapoghcohkhffcmp" target="_blank">web store page</a>; (2) click "Add to Chrome;" and (3) review permissions / "Add extension."
      </li>
    </ul>
    <p>
      If you don't have Firefox, you can <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">download it here</a>. Would you rather use Chrome? <a href="https://www.google.com/chrome/" target="_blank">Download it here</a>.
    </p>
    <h3><a name="point" href="posts/rpg-quanta/#point" class="anchor" alt="deep link to this section"></a>Point it at an API</h3>
    <p>
      Here we'll walk through how to use an LLM provided by OpenAI, but you don't have to use their offering. If you're interested in alternatives, you can find them <a href="https://github.com/SuffolkLITLab/prompts/tree/main#openai-compatible-api-integration" target="_blank">here</a>. You can even run your LLM locally, avoiding the need to share your prompts with a third-party. If you need an OpenAI account, you can <a href="https://platform.openai.com/signup" target="_blank">create one here</a>. Note: when you create a new OpenAI account you are given a limited amount of free API credits. If you created an account some time ago, however, these may have expired. If your credits have expired, you will need to enter a <a href="https://platform.openai.com/account/billing/overview" target="_blank">billing method</a> before you can use the API. You can check the state of any credits <a href="https://platform.openai.com/usage" target="_blank">here</a>.
    </p>
    <p>
      Login to <a href="https://openai.com/" target="_blank">OpenAI</a>, and navigate to the <a href="https://platform.openai.com/docs/" target="_blank">API documentation</a>.
    </p>
    <div class="featured_img_center">
      <a href="images/50-days/OpenAI_keys.png"><img src="images/50-days/OpenAI_keys.png" ALT="Screenshot of the OpenAI API Keys page showing where to click to create a new key." class="list_img_file" style="border: 1px solid #a5a5a5;"/></a>
    </div>
    <p>Once you are looking at the API docs, follow the steps outlined in the image above. That is:
    <ol>
      <li>Select "API keys" from the left menu</li>
      <li>Click "+ Create new secret key"</li>
    </ol>
    <hr>
    <p>
      On LIT Prompt's <i>Templates & Settings</i> screen, set your API Base to <code>https://api.openai.com/v1/chat/completions</code> and your API Key equal to the value you got above after clicking "+ Create new secret key".  You get there by clicking the <i>Templates & Settings</i> button in the extension's popup:
    </p>
    <ol>
      <li>open the extension</li>
      <li>click on  <i>Templates & Settings</i></li>
      <li>enter the API Base and Key (under the section <i>OpenAI-Compatible API Integration</i>)</li>
    </ol>
    <div class="featured_img_center">
      <a href="images/50-days/popup.png"><img src="images/50-days/popup.png" ALT="Screenshot of the LIT Prompts extension popup." class="list_img_file" style="border: 1px solid #a5a5a5;"/></a>
    </div>
    <p>
      Once those two bits of information (the API Base and Key) are in place, you're good to go. Now you can edit, create, and run prompt templates. Just open the LIT Prompts extension, and click one of the options. I suggest, however, that you read through the <i>Templates and Settings</i> screen to get oriented. You might even try out a few of the preloaded prompt templates. This will let you jump right in and get your hands dirty in the next section.
    </p>
    <div class="featured_img_center">
      <a href="images/50-days/credentials.png"><img src="images/50-days/credentials.png" ALT="Screenshot of the LIT Prompts extension popup." class="list_img_file" style="border: 1px solid #a5a5a5;"/></a>
    </div>
    <p>
      <span style="background:yellow;">If you receive an error when trying to run a template after entering your Base and Key, and you are using OpenAI, make sure to check the state of any credits <a href="https://platform.openai.com/usage" target="_blank">here</a>. If you don't have any credits, you will need a billing method on file.</span>
    </p>
    <p>
      <i>If you found this hard to follow, consider following along with the first four minutes of the video <a href="posts/rpg-quanta/#setup">above</a>. It covers the same content. It focuses on Firefox, but once you've installed the extension, the steps are the same.</i>
    </p>
  </div>

  <!--
    =================================================

                   Write Your Template

    =================================================
  -->
  <hr>
  <h2><a name="template" href="posts/rpg-quanta/#template" class="anchor" alt="deep link to this section"></a>The Prompt Pattern (Template)</h2>

  <div class="featured_img_right">
    <a href="images/boxquote.png"><img src="images/boxquote.png" ALT="A slide showing the Georeg Box quote: All models are wrong, but some models are useful." class="list_img_file"/></a>
    <div class="caption">
      Maps are models; they don't show everything. That's okay as long as you don't confuse the map for the territory.
    </div>
  </div>

  <p>
    When crafting a LIT Prompts template, we use a mix of plain language and variable placeholders. Specifically, you can use double curly brackets to encase predefined variables. If the text between the brackets matches one of our predefined variable names, that section of text will be replaced with the variable's value. Today we'll be using <code>{{d20}}</code> which is replaced by a random number between 1 and 20. See the extension's <a href="https://github.com/SuffolkLITLab/prompts#prompt-templates" target="_blank">documentation</a>.
  </p>
  <p>
    If the text within brackets is not the name of a predefined variable, like <code>{{What do you want to do?}}</code>, it will trigger a prompt for your user that echo's the placeholder (e.g., a text bubble containing, "What do you want to do?"). After the user answers, their reply will replace this placeholder. A list of predefined variables can be found in the extension's <a href="https://github.com/SuffolkLITLab/prompts#prompt-templates" target="_blank">documentation</a>. 
  </p>
  <p>
    As with the majority of our prompt templates, the logic here is pretty easy to follow. It's just the process we described above where we rate the difficulty of a task and compare this to the roll of a dice. 
  </p>

  <p>Here's the template's title.</p>
  <p><code>Play One Beat of Dragons & Desk Jobs</code></p>
  <p>Here's the template's text.</p>
  <!--
    #########################
    #########################
    #####   start code   ####
    #########################
    #########################
  -->
  <section class="line-numbers">
    <pre class="language-xxx" style="white-space:pre-wrap;"><code>You are the game master for a table-top role-playing game. You are playing with one other player. They will inhabit the role of the protagonist, making decisions for how they move through the world. You will craft a story around their decisions, providing texture and playing the parts of all the other characters. First, I'm going to give you some context so you understand the narrative expectations. 

========

Setting and Genera: 

- Your story telling should adhere to the following genera expectations: magical realism 
- Your story will start at the following place: the desk of our protagonist where they work in an office run by dragons
- Your story is set at the following time: present day

========

The Protagonist:

Earlier you asked the other player to fill in a character sheet for the protagonist. Here are their answers. Use them to help you shape the story.

- name: Alex
- additional notes: Alex is a normal human, and their gender is never revealed. When describing them always use they/them pronouns. 

========

The protagonist is seated at their desk.

The player who is playing the protagonist choses to do the following:

{{What do you want to do?}}

========

To determine if they are successful, start by assessing the likelihood of succeed for the above action. That is figure out how hard it will be for them to succeed in doing what they want to. Label this difficulty with one of the following labels: 

- Easy
- Medium
- Hard

Now we're going to role a 20-sided dice to see if they are successful. Okay, the dice roll was {{d20}}.

If the difficulty was Easy, the roll ({{d20}}) has to be greater than or equal to 1 for them to succeed. 

If the difficulty was Medium, the roll ({{d20}}) has to be greater than or equal to 7 for them to succeed. 

If the difficulty was Medium, the roll ({{d20}}) has to be greater than or equal to 17 for them to succeed. 

If they succeed you are to return a selection of prose continuing the story. Format your reply in JSON with the following key-value pairs:

1. "difficulty" where the value is the label you applied above.
2. "difficulty_cutoff" where the value is the numeric cutoff for the specified difficulty. 
3. "roll" where the value is the outcome of the above dice roll.
4. "success" where the value is 1 if roll is greater than or equal to the difficulty_cutoff. 
5. "narrative" where the value is the prose you produce describing what happened. 
</code></pre>
  </section>
  <!--
    #########################
    #########################
    #####    end code    ####
    #########################
    #########################
  -->
  <p>And here are the template's parameters:</p>
  <ul>
    <li><b>Output Type:</b> <code>LLM</code>. This choice means that we'll "run" the template through an LLM (i.e., this will ping an LLM and return a result). Alternatively, we could have chosen "Prompt," in which case the extension would return the text of the completed template. </li>
    <li><b>Model:</b> <code>gpt-3.5-turbo-16k</code>. This input specifies what model we should use when running the prompt. Available models differ based on your API provider. See e.g., <a href="https://platform.openai.com/docs/models" target="_blank">OpenAI's list of models</a>.</li>
    <li><b>Temperature:</b> <code>0.7</code>. Temperature runs from 0 to 1 and specifies how "random" the answer should be. Here I'm using 0.7 because I'm happy to have the text be a little "creative."</li> 
    <li><b>Max Tokens:</b> <code>1000</code>. This number specifies how long the reply can be. Tokens are chunks of text the model uses to do its thing. They don't quite match up with words but are close. 1 token is something like 3/4 of a word. Smaller token limits run faster.</li>
    <li><b>JSON:</b> <code>Yes</code>. This asks the model to output its answer in something called JSON, which is a nice machine-readable way to structure data. See <a href="https://en.wikipedia.org/wiki/JSON" target="_blank">https://en.wikipedia.org/wiki/JSON</a></li>
    <li><b>Output To:</b> <code>Screen Only</code>. We can output the first reply from the LLM to a number of places, the screen, the clipboard... Here, we're content just to have it go to the screen.</li>
    <li><b>Post-run Behavior:</b> <code>FULL STOP</code>. Like the choice of output, we can decide what to do after a template runs. To keep things simple, I went with "FULL STOP."</li>    <li><b>Hide Button:</b> <code>unchecked</code>. This determines if a button is displayed for this template in the extension's popup window. </li>  </ul>
<h3><a name="working" href="posts/rpg-quanta/#working" class="anchor" alt="deep link to this section"></a>Working with the above template</h3>
  <p>
    To work with the above template, you could copy it and its parameters into LIT Prompts one by one, or you could download a single prompts file and upload it from the extension's <i>Templates &amp; Settings</i> screen. This will replace your existing prompts.
  </p>

  <div class="featured_img_center" style="max-width:900px;">
    <a href="images/50-days/template_upload.png"><img src="images/50-days/template_upload.png" ALT="Screenshot of the LIT Prompts Templates and Settings page showing where to upload prompts files." class="list_img_file" style="border: 1px solid #a5a5a5;"/></a>
  </div>
  <p>
    You can download a prompts file (the above template and its parameters) suitable for upload by clicking this button:
  </p>

  <div class="button_row">
    <a href="javascript:void('');" onClick="saveTextAsFile(prompts,'prompt_template.txt')" class="button" style="width:220px;">Download prompts file</a>
  </div>
  <!--
    =================================================

                    Kick the Tires

    =================================================
  -->
  <hr>
  <h2><a name="tires" href="posts/rpg-quanta/#tires" class="anchor" alt="deep link to this section"></a>Kick the Tires</h2>
  <p>
    It's one thing to read about something and another to put what you've learned into practice. Let's see how this template performs.
  </p>
  <ul>
    <li>
      <b>Make it Your Own</b>. Edit the template to produce scenes from a different genre or with different characters. 
    </li>    
    <li>
      <b>What next?</b> Think about how we might build on what we've learned so far to take our simulations to the next level. How could you incorporate the output of a template like this one into another template, or a chain of templates? 
    </li>    
  </ul>
    <!--
    =================================================

                     Export & Share

    =================================================
  -->
  <hr>
  <h2><a name="export" href="posts/rpg-quanta/#export" class="anchor" alt="deep link to this section"></a>Export and Share</h2>

  <p>
    After you've made the template your own and have it behaving the way you like, you can export and share it with others. This will produce an HTML file you can share. This file should work on any internet connected device. To create your file, click the <i>Export Interactions Page</i> button. The contents of the textarea above the button will be appended to the top of your exported file. Importantly, if you don't want to share your API key, you should temporarily remove it from your settings before exporting.
  </p>
  <div class="featured_img_center" style="max-width:900px;">
    <a href="images/50-days/export_html.png"><img src="images/50-days/export_html.png" ALT="Screenshot of the LIT Prompts Templates and Settings page showing where to export a file." class="list_img_file" style="border: 1px solid #a5a5a5;"/></a>
  </div>

  <p>
    If you want to see what an exported file looks like without having to make one yourself. You can use the buttons below. <i>View export in browser</i> will open the file in your browser, and <i>Download export</i> will download a file. In either case the following custom header will be inserted into your file. It will NOT include an API key. So, you'll have to enter one when asked if you want to see things work. <i>This information is saved in your browser. If you've provided it before, you won't be asked again. It is not shared with me. To remove this information for this site (and only this site, not individual files), you can follow the instructions found on my <a href="privacy">privacy page</a>.</i> Remember, when you export your own file, whether or not it contains and API key depends on if you have one defined at the time of output.
  </p>

  <p>Custom header:</p>
    <!--
    #########################
    #########################
    #####   start code   ####
    #########################
    #########################
  -->
  <section class="line-numbers">
    <pre class="language-xxx" style="white-space:pre-wrap;"><code>&lt;img src="https://sadlynothavocdinosaur.com/images/50-days/dragons_and_desk_jobs.png" width=100%>
&lt;h2>Roll a D20&lt;/h2>
&lt;p>
  This short scene is part of a larger set of examples. See &lt;a href="https://sadlynothavocdinosaur.com/posts/rpg-quanta/" target="_blank">Narrative Quanta: LLMs as RPG Building Blocks. Generate the outcome of a scene for a role-playing game&lt;/a>.
&lt;p>
  Players of table-top role-playing games (RPGs) will recognize the following exchange as an &lt;a href="https://colarusso.github.io/dm/more.html#abilitycheck" target="_blank">ability check&lt;/a>. At their simplest, they involve rolling a 20-sided dice (d20) and comparing the outcome with a difficulty class to see if a player is successful. Difficult tasks have high difficulty classes. So they require players to get higher rolls.  
&lt;/p>
&lt;p>
  Your name is Alex. You are a non-magical human working in an office run by dragons. After expressing what you would like to do, you will be provided with the outcome of your roll. This includes the number you rolled as well as the difficulty class for the task at hand and the ultimate outcome. Try your hand at everything from "getting a cup of coffee" to "slaying a dragon."&lt;/p>
&lt;hr style="border: solid 0px; border-bottom: solid 1px #555;margin: 5px 0 15px 0"/>
</code></pre>
  </section>
  <!--
    #########################
    #########################
    #####    end code    ####
    #########################
    #########################
  -->
  <p>
    Not sure what's up with all those greater than and less than signs? Looking for tips on how to style your HTML? Check out this <a href="https://www.w3schools.com/html/default.asp" target="_blank">general HTML tutorial</a>.
  </p>
  <div class="button_row">
    <a href="posts/rpg-quanta/interactions.html" target="_blank" class="button" style="width:230px;margin-right: 15px;">View export in browser</a>
    <a href="javascript:void('');" onClick="saveTextAsFile(exported,'interactions.html')" class="button">Download export</a>
  </div>


    <!--
    =================================================

                       References

    =================================================
  -->
  <hr>
  <h2><a name="references" href="posts/tldr-post/#references" class="anchor" alt="deep link to this section"></a>TL;DR References</h2>
  <p>
    ICYMI, if you didn't click through above, you might want to give this a look now.   
  </p>
  <ul> 

    <li>
      <a href="https://colarusso.github.io/dm/" target="_blank">Dungeon Master's Helper</a> by David Colarusso. 
      This webapp is meant as a handy tool for game masters (Dungeon Masters in the D&D world). It has tools to help folks run ability checks and the like, and importantly for our purposes, it has a number of beginners resources, including <a href="https://colarusso.github.io/dm/more.html" target="_blank">a glossary</a> where much of the game play and many concepts are explained. 
    </li>
    
  </ul>

  <!--
  =================================================

                  Preview projects

  =================================================
  -->
  <div id="previews"></div>

  </div>
  <!-- END PAGE CONTENT -->
  <div class="footer">
      <span class="footer_links">
        <a href="https://mastodon.social/@Colarusso" target="_blank">Mastodon</a>
        | <a href="https://github.com/colarusso" target="_blank">GitHub</a>
        | <a href="./privacy">Privacy</a>
        | <a href="https://sadlynothavocdinosaur.com/feed.xml">RSS</a>
      </span>
      <span class="byline">Site by David Colarusso</span>
  </div>
</div>

<script>
  /*new GreenAudioPlayer('.gap-example');
  const audio_object = document.querySelector('.gap-example  audio');

  try {
    MathJax.typeset();
	} catch (error) {}*/

  (async () => {
    prompts = await loadFile('posts/rpg-quanta/prompt_template.txt');
    exported = await loadFile('posts/rpg-quanta/interactions.html');
  })()
</script>

</BODY></HTML>
